<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.appsys.dao.appinfo.AppInfoMapper">

    <select id="getAppListPage" resultType="AppInfo">
        SELECT a.softwareName,a.APKName,a.softwareSize,a.flatformId,a.categoryLevel1,a.categoryLevel2,
        a.categoryLevel3,
        a.status,
        a.downloads,
        v.versionNo
        FROM app_info a
        LEFT JOIN app_version v
        ON v.id = a.versionId
        LEFT JOIN dev_user u ON 1=1
        <trim prefix="where" prefixOverrides="and | or">
            <if test="softwareName != null and softwareName!=''">
                and a.softwareName like '%${softwareName}%'
            </if>
            <if test="status != null">
                and a.status = #{status}
            </if>
            <if test="flatformId != null">
                and a.flatformId = #{flatformId}
            </if>
            <if test="categoryLevel1 != null">
                and a.categoryLevel1 = #{categoryLevel1}
            </if>
            <if test="categoryLevel2 != null">
                and a.categoryLevel2 = #{categoryLevel2}
            </if>
            <if test="categoryLevel3 != null">
                and a.categoryLevel3 = #{categoryLevel3}
            </if>
            <if test="devId != null">
                and a.devId=#{devId}
            </if>
        </trim>
    </select>

</mapper>
